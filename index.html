<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Factor Master - Final Check</title>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #6200ea; --secondary: #00e5ff; --success: #00c853; 
            --warning: #ffab00; --danger: #ff1744; --danger-dark: #b71c1c; --dark: #1a237e; 
            --bg: #0f172a; --card-bg: #ffffff; --selection-bg: #f0f7ff; 
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body { font-family: 'Kanit', sans-serif; background: var(--bg); color: var(--dark); display: flex; flex-direction: column; align-items: center; justify-content: flex-start; min-height: 100dvh; margin: 0; padding: 10px; overflow-y: auto; }

        .screen { 
            background: var(--card-bg); padding: 15px; border-radius: 25px; 
            width: 100%; max-width: 800px; display: none; 
            flex-direction: column; border: 4px solid var(--secondary); position: relative; 
            box-shadow: 0 0 30px rgba(0, 229, 255, 0.3); margin-bottom: 15px;
        }

        #screen-game {
            min-height: 90vh;
            height: auto;
            justify-content: space-between;
            gap: 15px;
        }

        .active { display: flex; animation: fadeIn 0.3s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            20% { transform: translateX(-10px); }
            40% { transform: translateX(10px); }
            60% { transform: translateX(-10px); }
            80% { transform: translateX(10px); }
        }
        
        @keyframes time-shake {
            0%, 100% { transform: translate(0, 0); }
            25% { transform: translate(2px, 1px); }
            50% { transform: translate(-1px, -1px); }
            75% { transform: translate(-2px, 1px); }
        }
        .urgent-shake { animation: time-shake 0.15s infinite; }

        .error-shake { 
            animation: shake 0.3s ease-in-out; 
            border: 2px solid var(--danger) !important; 
            background-color: #fff5f5 !important;
        }

        .sound-toggle {
            position: absolute; top: 15px; right: 15px;
            width: 42px; height: 42px; background: var(--primary);
            border-radius: 50%; display: flex; align-items: center;
            justify-content: center; cursor: pointer; border: 2px solid white;
            z-index: 10; font-size: 20px; color: white;
        }

        .content-wrap { display: flex; flex-direction: column; gap: 12px; }
        h1.game-title { margin: 0; font-size: clamp(28px, 5vw, 40px); color: var(--primary); text-align: center; font-weight: 700; line-height: 1.2; }
        
        .container-box {
            background: var(--selection-bg); padding: 15px; border-radius: 18px;
            border: 1px solid #d0e1f9; display: flex; flex-direction: column; gap: 8px;
        }
        .input-label { font-size: 16px; color: var(--dark); font-weight: bold; margin-left: 5px; }
        input { width: 100%; padding: 12px; border-radius: 12px; border: 2px solid #ced6e0; font-size: 18px; text-align: center; font-family: 'Kanit'; background: white; transition: 0.2s; }

        .selector-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px; width: 100%; }
        @media (min-width: 600px) { .selector-grid { grid-template-columns: repeat(6, 1fr); } }
        
        .btn-select { 
            background: #ffffff; border: 2px solid #dee2e6; color: #495057; 
            border-radius: 12px; cursor: pointer; font-family: 'Kanit';
            height: 48px; font-size: 16px; transition: 0.2s; font-weight: bold;
            display: flex; align-items: center; justify-content: center;
        }
        .btn-select.selected { background: var(--warning) !important; border-color: #ff8f00 !important; color: #000 !important; }

        .btn-main { 
            background: linear-gradient(135deg, #00e676 0%, var(--success) 100%); 
            color: white; border: none; border-radius: 20px; 
            cursor: pointer; width: 100%; font-weight: 800; height: 70px; font-size: 32px;
            box-shadow: 0 6px 0 #1b5e20; transition: 0.1s; margin-top: 10px;
        }
        .btn-main:active { transform: translateY(3px); box-shadow: 0 2px 0 #1b5e20; }

        .footer { width: 100%; font-size: 14px; border-top: 2px solid #f1f2f6; padding-top: 15px; color: #546e7a; text-align: center; margin-top: auto; line-height: 1.6; }
        .dev-name { display: block; font-size: 18px; font-weight: 700; color: var(--primary); margin: 2px 0; }
        
        .game-info-panel {
            background: #f8fafc; padding: 10px 15px; border-radius: 20px; border: 2px solid #e2e8f0;
            display: flex; flex-direction: column; gap: 8px; text-align: center;
        }
        
        /* ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡∏Å‡∏∂‡πà‡∏á‡∏Å‡∏•‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ */
        .player-identity { 
            display: flex; justify-content: center; align-items: center; flex-wrap: wrap;
            font-size: 20px; font-weight: 700; color: var(--primary); padding-right: 0;
            text-align: center; width: 100%;
        }

        .level-tag { 
            display: inline-block; background: var(--dark); color: white; 
            padding: 2px 12px; border-radius: 8px; font-size: 12px; margin-top: 2px; 
        }

        .timer-container { width: 100%; margin-top: 2px; }
        .timer-bar-container {
            width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden;
        }
        #timer-bar-fill {
            width: 100%; height: 100%; background: linear-gradient(90deg, var(--secondary), var(--primary));
            transition: width 1s linear;
        }
        
        .timer-labels {
            display: flex; justify-content: space-between; align-items: center; margin-top: 2px;
        }
        #timer-text { color: var(--primary); font-weight: 800; font-size: 13px; }
        #info-p-start-time { color: #64748b; font-weight: bold; font-size: 11px; }

        .stats-grid { 
            display: grid; grid-template-columns: repeat(3, 1fr); 
            gap: 5px; margin-top: 2px;
            background: white; padding: 6px; border-radius: 12px; border: 1px solid #e2e8f0;
        }
        .stat-box { display: flex; flex-direction: row; align-items: baseline; justify-content: center; gap: 6px; }
        .stat-label { font-size: 13px; font-weight: bold; }
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
        .stat-val { font-size: 28px; font-weight: 900; line-height: 1; }
        .unit-label { font-size: 12px; font-weight: bold; }

        .color-total { color: var(--primary); }
        .color-correct { color: var(--success); }
        .color-wrong { color: var(--danger); }

        .target-container { 
            flex-grow: 1; 
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            padding: 0; margin-top: -10px; /* ‡∏Ç‡∏¢‡∏±‡∏ö‡∏Ç‡∏∂‡πâ‡∏ô */
        }
        .target-hint { font-size: 26px; color: #64748b; font-weight: bold; margin-bottom: -5px; }
        
        /* ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏à‡∏ó‡∏¢‡πå‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô */
        #target-number { 
            font-size: clamp(120px, 25vh, 200px); 
            font-weight: 800; color: var(--warning); 
            line-height: 1; text-shadow: 4px 4px 0px rgba(0,0,0,0.1);
            margin: 5px 0;
        }
        
        /* ‡∏õ‡∏£‡∏±‡∏ö‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏õ‡πá‡∏ô 3 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå (2 ‡πÅ‡∏ñ‡∏ß) */
        .options-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 15px; width: 100%; padding-bottom: 10px;
        }
        
        .option-btn { 
            aspect-ratio: 1.4 / 1; 
            font-size: clamp(40px, 7vh, 70px); 
            border-radius: 22px; border: none; background: #f1f3f5; font-weight: 800; 
            box-shadow: 0 8px 0 #ced4da; cursor: pointer; transition: 0.1s; 
            font-family: 'Kanit'; color: var(--dark);
            display: flex; align-items: center; justify-content: center;
        }
        .option-btn:active:not(.correct):not(.wrong) { transform: translateY(4px); box-shadow: 0 4px 0 #ced4da; }
        .option-btn.correct { background: var(--success) !important; color: white !important; box-shadow: 0 8px 0 #1b5e20 !important; transform: scale(1.05); z-index: 2; }
        .option-btn.wrong { background: var(--danger) !important; color: white !important; box-shadow: 0 8px 0 #b71c1c !important; opacity: 0.8; }

        .cancel-btn-wrapper {
            width: 100%; max-width: 800px; display: none;
            justify-content: center; padding: 10px 0 30px 0;
        }
        .cancel-btn {
            background: var(--danger-dark); color: white; 
            border: 2px solid white; 
            padding: 15px 40px; border-radius: 50px; font-weight: bold; 
            cursor: pointer; font-size: 20px; transition: 0.3s; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            width: 90%;
        }
        .cancel-btn:active { transform: scale(0.95); }
    </style>
</head>
<body>

    <div id="screen-setup" class="screen active">
        <div id="sound-btn-setup" class="sound-toggle" onclick="toggleSound()">üîä</div>
        <div class="content-wrap">
            <h1 class="game-title">Factor Master<br>‡πÄ‡∏Å‡∏°‡∏´‡∏≤‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö</h1>
            <div class="container-box">
                <span class="input-label">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</span>
                <input type="text" id="p-name" placeholder="‡∏î.‡∏ä. ‡∏ã‡∏π‡∏•‡∏Å‡∏¥‡∏ü‡∏•‡∏µ ‡∏î‡∏≠‡πÄ‡∏•‡∏≤‡∏∞">
                <div style="display:flex; gap:10px;">
                    <div style="flex:2">
                        <span class="input-label">‡∏ä‡∏±‡πâ‡∏ô</span>
                        <input type="text" id="p-class" placeholder="‡∏õ.6/1">
                    </div>
                    <div style="flex:1">
                        <span class="input-label">‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà</span>
                        <input type="number" id="p-no" placeholder="1">
                    </div>
                </div>
            </div>
            <span class="input-label" style="text-align:center; color: var(--primary);">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å (‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏™‡∏°‡πÑ‡∏î‡πâ)</span>
            <div class="container-box">
                <div class="selector-grid">
                    <button class="btn-select range-btn selected" data-value="1-25">1-25</button>
                    <button class="btn-select range-btn" data-value="26-50">26-50</button>
                    <button class="btn-select range-btn" data-value="51-75">51-75</button>
                    <button class="btn-select range-btn" data-value="76-100">76-100</button>
                    <button class="btn-select range-btn" data-value="101-125">101-125</button>
                    <button class="btn-select range-btn" data-value="126-150">126-150</button>
                </div>
            </div>
            <span class="input-label" style="text-align:center; color: var(--primary);">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ (‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ)</span>
            <div class="container-box">
                <div class="selector-grid">
                    <button class="btn-select time-btn" data-value="30">30</button>
                    <button class="btn-select time-btn selected" data-value="60">60</button>
                    <button class="btn-select time-btn" data-value="90">90</button>
                    <button class="btn-select time-btn" data-value="120">120</button>
                    <button class="btn-select time-btn" data-value="150">150</button>
                    <button class="btn-select time-btn" data-value="180">180</button>
                </div>
            </div>
            <button class="btn-main" onclick="initGame()">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°‡πÄ‡∏•‡∏¢!!!</button>
            <div class="footer">
                ‡∏≠‡∏≠‡∏Å‡πÅ‡∏ö‡∏ö‡πÅ‡∏•‡∏∞‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÇ‡∏î‡∏¢...
                <span class="dev-name">‡∏ô‡∏≤‡∏¢‡∏ã‡∏π‡∏•‡∏Å‡∏¥‡∏ü‡∏•‡∏µ ‡∏î‡∏≠‡πÄ‡∏•‡∏≤‡∏∞</span>
                <span>‡∏Ñ‡∏£‡∏π ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡πÑ‡∏ó‡∏¢‡∏£‡∏±‡∏ê‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤ 52 (‡∏ä‡∏∏‡∏°‡∏ä‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏ï‡πâ‡∏ô‡πÑ‡∏û)</span><br>
                <span>‡∏™‡∏û‡∏õ.‡∏õ‡∏±‡∏ï‡∏ï‡∏≤‡∏ô‡∏µ ‡πÄ‡∏Ç‡∏ï 2</span>
            </div>
        </div>
    </div>

    <div id="screen-game" class="screen">
        <div id="sound-btn-game" class="sound-toggle" onclick="toggleSound()">üîä</div>
        <div class="game-info-panel">
            <div class="player-identity" id="player-display"></div>
            <div style="text-align: center;">
                <div class="level-tag" id="info-p-level">‡∏£‡∏∞‡∏î‡∏±‡∏ö: -</div>
            </div>
            
            <div class="timer-container">
                <div id="timer-bar-area" class="timer-bar-container">
                    <div id="timer-bar-fill"></div>
                </div>
                <div class="timer-labels">
                    <div id="timer-text">‡πÄ‡∏ß‡∏•‡∏≤: 0 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ</div>
                    <div id="info-p-start-time">0s</div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-box">
                    <span class="stat-label color-total">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    <span class="stat-val color-total" id="stat-total">0</span>
                    <span class="unit-label color-total">‡∏Ç‡πâ‡∏≠</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label color-correct">‡∏ñ‡∏π‡∏Å</span>
                    <span class="stat-val color-correct" id="stat-correct">0</span>
                    <span class="unit-label color-correct">‡∏Ç‡πâ‡∏≠</span>
                </div>
                <div class="stat-box">
                    <span class="stat-label color-wrong">‡∏ú‡∏¥‡∏î</span>
                    <span class="stat-val color-wrong" id="stat-wrong">0</span>
                    <span class="unit-label color-wrong">‡∏Ç‡πâ‡∏≠</span>
                </div>
            </div>
        </div>

        <div class="target-container">
            <span class="target-hint">‡∏ï‡∏±‡∏ß‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á</span>
            <div id="target-number">?</div>
        </div>

        <div class="options-grid" id="options"></div>
    </div>

    <div id="cancel-area" class="cancel-btn-wrapper">
        <button onclick="location.reload()" class="cancel-btn">‚úï ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
    </div>

    <script>
        let gameState = { 
            timeLeft: 0, totalTime: 0, timerId: null, 
            isSoundOn: true, isAnswering: false,
            countTotal: 0, countCorrect: 0, countWrong: 0
        };
        
        const playClickSound = (freq = 600, type = 'sine', duration = 0.1) => {
            if (!gameState.isSoundOn) return;
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const osc = context.createOscillator();
            const gain = context.createGain();
            osc.connect(gain); gain.connect(context.destination);
            osc.type = type; osc.frequency.setValueAtTime(freq, context.currentTime);
            gain.gain.setValueAtTime(0.1, context.currentTime);
            osc.start(); osc.stop(context.currentTime + duration);
        };

        function toggleSound() { 
            gameState.isSoundOn = !gameState.isSoundOn; 
            const icon = gameState.isSoundOn ? 'üîä' : 'üîá';
            document.getElementById('sound-btn-setup').innerText = icon;
            document.getElementById('sound-btn-game').innerText = icon;
            if(gameState.isSoundOn) playClickSound(800);
        }

        document.querySelectorAll('.btn-select').forEach(btn => {
            btn.onclick = function() {
                playClickSound();
                if (this.classList.contains('range-btn')) {
                    this.classList.toggle('selected');
                } else {
                    document.querySelectorAll('.time-btn').forEach(b => b.classList.remove('selected'));
                    this.classList.add('selected');
                }
            };
        });

        function initGame() {
            const elName = document.getElementById('p-name'), 
                  elClass = document.getElementById('p-class'), 
                  elNo = document.getElementById('p-no');
            
            let isComplete = true;
            [elName, elClass, elNo].forEach(el => {
                el.classList.remove('error-shake');
                if (!el.value.trim()) {
                    isComplete = false;
                    void el.offsetWidth; 
                    el.classList.add('error-shake');
                }
            });

            if (!isComplete) { playClickSound(200); alert("‚ùå ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô!"); return; }

            const selectedRanges = Array.from(document.querySelectorAll('.range-btn.selected')).map(b => b.dataset.value);
            if (selectedRanges.length === 0) { alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å"); return; }
            const timeSelected = document.querySelector('.time-btn.selected').dataset.value;

            const spacer = "&nbsp;&nbsp;&nbsp;&nbsp;";
            document.getElementById('player-display').innerHTML = `${elName.value}${spacer}${elClass.value}${spacer}‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà ${elNo.value}`;
            
            document.getElementById('info-p-level').innerText = `‡∏£‡∏∞‡∏î‡∏±‡∏ö: ${selectedRanges.join(', ')}`;
            document.getElementById('info-p-start-time').innerText = `${timeSelected}s`;

            gameState.totalTime = parseInt(timeSelected);
            gameState.timeLeft = gameState.totalTime;
            gameState.countTotal = 0; gameState.countCorrect = 0; gameState.countWrong = 0;
            
            document.getElementById('screen-setup').style.display = 'none';
            document.getElementById('screen-game').classList.add('active');
            document.getElementById('cancel-area').style.display = 'flex';
            
            startTimer(); 
            newQuestion();
        }

        function startTimer() {
            const bar = document.getElementById('timer-bar-fill');
            const barArea = document.getElementById('timer-bar-area');
            const timerLabel = document.getElementById('timer-text');

            gameState.timerId = setInterval(() => {
                gameState.timeLeft--;
                timerLabel.innerText = `‡πÄ‡∏ß‡∏•‡∏≤: ${gameState.timeLeft} ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
                const percentage = (gameState.timeLeft / gameState.totalTime) * 100;
                bar.style.width = percentage + "%";
                
                if (gameState.timeLeft <= 10 && gameState.timeLeft > 0) {
                    playClickSound(440, 'square', 0.05);
                    bar.style.background = "var(--danger)";
                    timerLabel.style.color = "var(--danger)";
                    barArea.classList.add('urgent-shake');
                }
                
                if (gameState.timeLeft <= 0) {
                    clearInterval(gameState.timerId);
                    barArea.classList.remove('urgent-shake');
                    playClickSound(150, 'sawtooth', 0.5);
                    alert(`‚è∞ ‡∏´‡∏°‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡∏£‡∏±‡∏ö!\n‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: ${gameState.countTotal} ‡∏Ç‡πâ‡∏≠\n‡∏ñ‡∏π‡∏Å: ${gameState.countCorrect} ‡∏Ç‡πâ‡∏≠\n‡∏ú‡∏¥‡∏î: ${gameState.countWrong} ‡∏Ç‡πâ‡∏≠`);
                    location.reload();
                }
            }, 1000);
        }

        function newQuestion() {
            gameState.isAnswering = false;
            const ranges = Array.from(document.querySelectorAll('.range-btn.selected')).map(b => b.dataset.value);
            let pool = [];
            ranges.forEach(r => {
                const [min, max] = r.split('-').map(Number);
                for(let i = min; i <= max; i++) if(i > 1) pool.push(i);
            });
            
            const target = pool[Math.floor(Math.random() * pool.length)];
            document.getElementById('target-number').innerText = target;
            
            let allFactors = [];
            for(let i=1; i<=target; i++) if(target % i === 0) allFactors.push(i);
            
            const correct = allFactors[Math.floor(Math.random() * allFactors.length)];

            let options = [correct];
            let attempts = 0; 
            while(options.length < 6 && attempts < 100) {
                let wrong = Math.floor(Math.random() * (target + 10)) + 1;
                if (!allFactors.includes(wrong) && !options.includes(wrong)) {
                    options.push(wrong);
                }
                attempts++;
            }
            
            while(options.length < 6) {
                let filler = Math.floor(Math.random() * 200) + 1;
                if(!allFactors.includes(filler) && !options.includes(filler)) options.push(filler);
            }

            options.sort(() => Math.random() - 0.5);
            
            const grid = document.getElementById('options');
            grid.innerHTML = '';
            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt;
                btn.onclick = () => {
                    if (gameState.isAnswering) return;
                    gameState.isAnswering = true;
                    gameState.countTotal++;

                    if (opt === correct) { 
                        btn.classList.add('correct');
                        playClickSound(1000, 'sine', 0.1);
                        gameState.countCorrect++;
                    } else { 
                        btn.classList.add('wrong');
                        gameState.countWrong++;
                        Array.from(grid.children).forEach(b => {
                            if(parseInt(b.innerText) === correct) b.classList.add('correct');
                        });
                        playClickSound(200, 'triangle', 0.2);
                        document.getElementById('screen-game').classList.add('error-shake');
                        setTimeout(() => document.getElementById('screen-game').classList.remove('error-shake'), 300);
                    }
                    
                    document.getElementById('stat-total').innerText = gameState.countTotal;
                    document.getElementById('stat-correct').innerText = gameState.countCorrect;
                    document.getElementById('stat-wrong').innerText = gameState.countWrong;
                    setTimeout(newQuestion, 500);
                };
                grid.appendChild(btn);
            });
        }
    </script>
</body>
</html>
